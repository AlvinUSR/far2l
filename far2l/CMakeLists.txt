
project(far2l)

LIST(APPEND CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR})

add_subdirectory (bootstrap)

add_subdirectory (UCD)

add_definitions(-DUNICODE)
include_directories(Include)
include_directories(${CMAKE_CURRENT_BINARY_DIR})

set(SOURCES
cache.cpp 
cache.cpp
cddrv.cpp 
cddrv.cpp
CFileMask.cpp 
CFileMask.cpp
chgmmode.cpp 
chgmmode.cpp
chgprior.cpp 
chgprior.cpp
clipboard.cpp 
clipboard.cpp
cmdline.cpp 
cmdline.cpp
codepage.cpp 
codepage.cpp
config.cpp 
config.cpp
console.cpp 
console.cpp
constitle.cpp 
constitle.cpp
copy.cpp 
copy.cpp
ctrlobj.cpp 
ctrlobj.cpp
cvtname.cpp 
cvtname.cpp
datetime.cpp 
datetime.cpp
delete.cpp 
delete.cpp
dialog.cpp 
dialog.cpp
dirinfo.cpp 
dirinfo.cpp
dirmix.cpp 
dirmix.cpp
dizlist.cpp 
dizlist.cpp
DlgBuilder.cpp 
DlgBuilder.cpp
dlgedit.cpp 
dlgedit.cpp
DlgGuid.cpp 
DlgGuid.cpp
DList.cpp 
DList.cpp
drivemix.cpp 
drivemix.cpp
edit.cpp 
edit.cpp
editor.cpp 
editor.cpp
execute.cpp 
execute.cpp
farqueue.cpp 
farqueue.cpp
farrtl.cpp 
farrtl.cpp
farwinapi.cpp 
farwinapi.cpp
ffolders.cpp 
ffolders.cpp
fileattr.cpp 
fileattr.cpp
fileedit.cpp 
fileedit.cpp
filefilter.cpp 
filefilter.cpp
filefilterparams.cpp 
filefilterparams.cpp
filelist.cpp 
filelist.cpp
FileMasksProcessor.cpp 
FileMasksProcessor.cpp
FileMasksWithExclude.cpp 
FileMasksWithExclude.cpp
fileowner.cpp 
fileowner.cpp
filepanels.cpp 
filepanels.cpp
filestr.cpp 
filestr.cpp
filetype.cpp 
filetype.cpp
fileview.cpp 
fileview.cpp
findfile.cpp 
findfile.cpp
flmodes.cpp 
flmodes.cpp
flplugin.cpp 
flplugin.cpp
flshow.cpp 
flshow.cpp
flupdate.cpp 
flupdate.cpp
fnparce.cpp 
fnparce.cpp
foldtree.cpp 
foldtree.cpp
format.cpp 
format.cpp
frame.cpp 
frame.cpp
global.cpp 
global.cpp
grabber.cpp 
grabber.cpp
headers.cpp 
headers.cpp
help.cpp 
help.cpp
hilight.cpp 
hilight.cpp
history.cpp 
history.cpp
hmenu.cpp 
hmenu.cpp
hotplug.cpp 
hotplug.cpp
infolist.cpp 
infolist.cpp
interf.cpp 
interf.cpp
keybar.cpp 
keybar.cpp
keyboard.cpp 
keyboard.cpp
language.cpp 
language.cpp
local.cpp 
local.cpp
lockscrn.cpp 
lockscrn.cpp
macro.cpp 
macro.cpp
main.cpp 
main.cpp
manager.cpp 
manager.cpp
menubar.cpp 
menubar.cpp
message.cpp 
message.cpp
mix.cpp 
mix.cpp
mkdir.cpp 
mkdir.cpp
modal.cpp 
modal.cpp
namelist.cpp 
namelist.cpp
options.cpp 
options.cpp
palette.cpp 
palette.cpp
panel.cpp 
panel.cpp
panelmix.cpp 
panelmix.cpp
pathmix.cpp 
pathmix.cpp
plist.cpp 
plist.cpp
plognmn.cpp 
plognmn.cpp
plugapi.cpp 
plugapi.cpp
plugins.cpp 
plugins.cpp
PluginW.cpp 
PluginW.cpp
poscache.cpp 
poscache.cpp
processname.cpp 
processname.cpp
qview.cpp 
qview.cpp
rdrwdsk.cpp 
rdrwdsk.cpp
RefreshFrameManager.cpp 
RefreshFrameManager.cpp
RegExp.cpp 
RegExp.cpp
registry.cpp 
registry.cpp
savefpos.cpp 
savefpos.cpp
savescr.cpp 
savescr.cpp
scantree.cpp 
scantree.cpp
scrbuf.cpp 
scrbuf.cpp
scrobj.cpp 
scrobj.cpp
scrsaver.cpp 
scrsaver.cpp
setattr.cpp 
setattr.cpp
setcolor.cpp 
setcolor.cpp
stddlg.cpp 
stddlg.cpp
strmix.cpp 
strmix.cpp
synchro.cpp 
synchro.cpp
syntax.cpp 
syntax.cpp
syslog.cpp 
syslog.cpp
TPreRedrawFunc.cpp 
TPreRedrawFunc.cpp
treelist.cpp 
treelist.cpp
tvar.cpp 
tvar.cpp
udlist.cpp 
udlist.cpp
UnicodeString.cpp 
UnicodeString.cpp
usermenu.cpp 
usermenu.cpp
viewer.cpp 
viewer.cpp
vmenu.cpp 
vmenu.cpp
xlat.cpp 
xlat.cpp
vtshell.cpp 
vtshell.cpp
vtansi.cpp 
vtansi.cpp
PluginA.cpp 
PluginA.cpp
execute_oscmd.cpp 
execute_oscmd.cpp
vtshell_translation.cpp 
vtshell_translation.cpp
vthistory.cpp 
vthistory.cpp
)

add_executable (far2l ${SOURCES})
add_dependencies(far2l bootstrap)

SET (WINPORT -Wl,--whole-archive WinPort -Wl,--no-whole-archive)

target_link_libraries(far2l UCD ${WINPORT} dl)
